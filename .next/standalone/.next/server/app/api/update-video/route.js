"use strict";(()=>{var e={};e.id=3816,e.ids=[3816],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9468:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>l,staticGenerationAsyncStorage:()=>c});var o={};r.r(o),r.d(o,{PATCH:()=>u});var a=r(9303),s=r(8716),n=r(670),i=r(7070);async function u(e){try{let t=e.headers.get("authorization");if(!t)return i.NextResponse.json({error:"Authorization header is required"},{status:401});let{video_url:r,club_type:o,swing_form:a,swing_note:s,user_id:n}=await e.json();if(!r||!n)return i.NextResponse.json({error:"video_url and user_id are required"},{status:400});let u="https://aps-bbc-02-dhdqd5eqgxa7f0hg.canadacentral-01.azurewebsites.net/api/v1",d=await fetch(`${u}/videos/search?user_id=${n}`,{method:"GET",headers:{Authorization:t,"Content-Type":"application/json"}});if(!d.ok)return console.error("動画検索失敗:",d.status),i.NextResponse.json({error:"Failed to search videos"},{status:d.status});let p=(await d.json()).videos.find(e=>e.video_url===r);if(!p)return i.NextResponse.json({error:"Video not found"},{status:404});let c=await fetch(`${u}/video/${p.video_id}`,{method:"PATCH",headers:{Authorization:t,"Content-Type":"application/json"},body:JSON.stringify({club_type:o,swing_form:a,swing_note:s})});if(!c.ok){let e=await c.text();return console.error("動画更新失敗:",c.status,e),i.NextResponse.json({error:"Failed to update video"},{status:c.status})}let l=await c.json();return i.NextResponse.json(l)}catch(e){return console.error("API route error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/update-video/route",pathname:"/api/update-video",filename:"route",bundlePath:"app/api/update-video/route"},resolvedPagePath:"/Users/morimotoshouta/Desktop/tech0/STEP4/BBC/bbc-golf-coaching-backend-ver2-main/frontend/app/api/update-video/route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:c,serverHooks:l}=d,h="/api/update-video/route";function v(){return(0,n.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:c})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[8948,5972],()=>r(9468));module.exports=o})();