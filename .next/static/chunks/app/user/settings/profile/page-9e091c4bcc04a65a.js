(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{2449:function(e,t,s){Promise.resolve().then(s.bind(s,4746))},4746:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(7437),a=s(2265),l=s(6463),n=s(9061),i=s(4697),o=s(2637),c=s(869);function d(){let e=(0,l.useRouter)(),[t,s]=(0,a.useState)({bio:"",lineUserId:""}),[d,u]=(0,a.useState)(!1),[x,h]=(0,a.useState)(""),[m,b]=(0,a.useState)("");(0,a.useEffect)(()=>{(()=>{let t=localStorage.getItem("access_token"),r=localStorage.getItem("user_email");if(!t||!r){e.push("/auth/login");return}s({bio:localStorage.getItem("user_bio")||"",lineUserId:localStorage.getItem("user_line_user_id")||""})})()},[e]);let g=async()=>{u(!0),b("");try{let s=localStorage.getItem("access_token"),r=localStorage.getItem("user_id");if(!s||!r)throw Error("認証情報が不足しています");let a={bio:t.bio,line_user_id:t.lineUserId},l=await fetch("".concat("https://aps-bbc-02-dhdqd5eqgxa7f0hg.canadacentral-01.azurewebsites.net/api/v1","/auth/user/").concat(r,"/profile"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(a)});if(!l.ok){let e=await l.json();throw Error(e.detail||"プロフィール情報の更新に失敗しました")}localStorage.setItem("user_bio",t.bio),localStorage.setItem("user_line_user_id",t.lineUserId),h("プロフィール情報が更新されました"),setTimeout(()=>{e.push("/user/settings")},1500)}catch(e){console.error("プロフィール情報更新エラー:",e),b(e.message||"プロフィール情報の更新に失敗しました"),setTimeout(()=>b(""),5e3)}finally{u(!1)}};return(0,r.jsxs)(o.d,{title:"プロフィール編集",subtitle:"プロフィール情報を更新",showBackButton:!0,onBackClick:()=>e.push("/user/settings"),children:[x&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-green-500/20 border border-green-500/30 rounded-lg text-green-300",children:x}),m&&(0,r.jsx)(c.Ou,{message:m}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"プロフィール文"}),(0,r.jsx)("textarea",{value:t.bio,onChange:e=>s(t=>({...t,bio:e.target.value})),className:"w-full px-3 py-2 bg-white/20 text-white rounded-lg border border-white/20 focus:outline-none focus:border-white/40 resize-none",rows:4,placeholder:"自己紹介を入力してください"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"LINEユーザーID"}),(0,r.jsx)("input",{type:"text",value:t.lineUserId,onChange:e=>s(t=>({...t,lineUserId:e.target.value})),className:"w-full px-3 py-2 bg-white/20 text-white rounded-lg border border-white/20 focus:outline-none focus:border-white/40",placeholder:"LINEユーザーIDを入力"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-8",children:[(0,r.jsxs)(c.Jr,{onClick:g,disabled:d,className:"flex-1 flex items-center justify-center gap-2",children:[(0,r.jsx)(n.Z,{size:16}),d?"保存中...":"保存"]}),(0,r.jsxs)(c.Jr,{variant:"secondary",onClick:()=>e.push("/user/settings"),className:"flex-1 flex items-center justify-center gap-2",children:[(0,r.jsx)(i.Z,{size:16}),"キャンセル"]})]})]})}},1066:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let s=(0,r.forwardRef)((s,n)=>{let{color:i="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:x,...h}=s;return(0,r.createElement)("svg",{ref:n,...a,width:o,height:o,stroke:i,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(l(e)),u].join(" "),...h},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(x)?x:[x]])});return s.displayName="".concat(e),s}},5137:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9061:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},4258:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4697:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6463:function(e,t,s){"use strict";var r=s(1169);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},869:function(e,t,s){"use strict";s.d(t,{Jr:function(){return l},Ou:function(){return i},ic:function(){return n},j7:function(){return a}});var r=s(7437);s(2265);let a=e=>{let{title:t,subtitle:s,children:a,showBackButton:l=!1,onBackClick:n,backButtonText:i="戻る"}=e;return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-violet-400 via-violet-600 to-violet-800 flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 opacity-5 pointer-events-none",children:(0,r.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"\n            linear-gradient(45deg, rgba(255,255,255,0.1) 25%, transparent 25%),\n            linear-gradient(-45deg, rgba(255,255,255,0.1) 25%, transparent 25%),\n            linear-gradient(45deg, transparent 75%, rgba(255,255,255,0.1) 75%),\n            linear-gradient(-45deg, transparent 75%, rgba(255,255,255,0.1) 75%)\n          ",backgroundSize:"40px 40px",backgroundPosition:"0 0, 0 20px, 20px -20px, -20px 0px"}})}),(0,r.jsxs)("div",{className:"absolute inset-0 opacity-5 pointer-events-none",children:[(0,r.jsx)("div",{className:"absolute top-20 left-10 w-32 h-32 bg-white rounded-full blur-3xl"}),(0,r.jsx)("div",{className:"absolute bottom-40 right-10 w-40 h-40 bg-white rounded-full blur-3xl"}),(0,r.jsx)("div",{className:"absolute top-1/2 left-1/4 w-24 h-24 bg-white rounded-full blur-2xl"})]}),(0,r.jsx)("div",{className:"relative z-10 flex-1 flex flex-col items-center justify-center text-center mb-16",children:(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-6xl md:text-7xl font-light text-white mb-1",style:{fontFamily:"Brush Script MT, cursive",textShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:t}),s&&(0,r.jsx)("p",{className:"text-lg sm:text-xl text-white/90 mb-6",children:s})]})}),(0,r.jsx)("div",{className:"relative z-10 w-full max-w-sm mb-8",children:a}),l&&n&&(0,r.jsx)("div",{className:"absolute top-6 left-6 z-20",children:(0,r.jsx)("button",{onClick:n,className:"p-2 text-white hover:bg-white hover:bg-opacity-20 rounded-full transition-colors",title:i,children:(0,r.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7"})})})})]})},l=e=>{let{children:t,onClick:s,disabled:a=!1,variant:l="primary",className:n=""}=e;return(0,r.jsx)("button",{onClick:s,disabled:a,className:"".concat("w-full font-semibold py-4 px-6 rounded-full transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-white bg-opacity-95 hover:bg-opacity-100 text-gray-800",secondary:"bg-violet-500 hover:bg-violet-600 text-white",danger:"bg-red-500 hover:bg-red-600 text-white"}[l]," ").concat(n),children:t})},n=e=>{let{label:t,type:s,value:a,onChange:l,placeholder:n,disabled:i=!1,maxLength:o,max:c,error:d,required:u=!1,className:x=""}=e;return(0,r.jsxs)("div",{className:x,children:[(0,r.jsxs)("label",{className:"block text-white text-sm font-medium mb-2",children:[t,u&&(0,r.jsx)("span",{className:"text-red-400 ml-1",children:"*"})]}),(0,r.jsx)("input",{type:s,value:a,onChange:l,className:"w-full bg-white bg-opacity-20 border rounded-xl px-4 py-3 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-white focus:border-opacity-60 ".concat(d?"border-red-400":"border-white border-opacity-30"),placeholder:n,disabled:i,maxLength:o,max:c}),d&&(0,r.jsx)("p",{className:"text-red-400 text-sm mt-1",children:d})]})},i=e=>{let{message:t,className:s=""}=e;return(0,r.jsx)("div",{className:"bg-red-500 bg-opacity-20 border border-red-300 rounded-lg p-3 ".concat(s),children:(0,r.jsx)("p",{className:"text-red-200 text-sm text-center",children:t})})}},2637:function(e,t,s){"use strict";s.d(t,{d:function(){return i}});var r=s(7437);s(2265);var a=s(5137),l=s(4258),n=s(6463);let i=e=>{let{children:t,title:s,subtitle:i,showBackButton:o=!1,onBackClick:c,backButtonText:d="戻る"}=e,u=(0,n.useRouter)();return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-violet-400 via-violet-600 to-violet-800 flex flex-col items-center justify-start pt-20 pb-6 px-6 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 opacity-5 pointer-events-none",children:(0,r.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"\n            linear-gradient(45deg, rgba(255,255,255,0.1) 25%, transparent 25%),\n            linear-gradient(-45deg, rgba(255,255,255,0.1) 25%, transparent 25%),\n            linear-gradient(45deg, transparent 75%, rgba(255,255,255,0.1) 75%),\n            linear-gradient(-45deg, transparent 75%, rgba(255,255,255,0.1) 75%)\n          ",backgroundSize:"40px 40px",backgroundPosition:"0 0, 0 20px, 20px -20px, -20px 0px"}})}),(0,r.jsxs)("div",{className:"absolute inset-0 opacity-5 pointer-events-none",children:[(0,r.jsx)("div",{className:"absolute top-20 left-10 w-32 h-32 bg-white rounded-full blur-3xl"}),(0,r.jsx)("div",{className:"absolute bottom-40 right-10 w-40 h-40 bg-white rounded-full blur-3xl"}),(0,r.jsx)("div",{className:"absolute top-1/2 left-1/4 w-24 h-24 bg-white rounded-full blur-2xl"})]}),(0,r.jsxs)("div",{className:"w-full max-w-md lg:max-w-lg xl:max-w-xl bg-white/10 backdrop-blur-sm rounded-2xl p-6 lg:p-8 relative z-10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[o&&(0,r.jsxs)("button",{onClick:()=>{c?c():u.back()},className:"flex items-center space-x-2 text-white hover:text-white/80 transition-colors",children:[(0,r.jsx)(a.Z,{size:20}),(0,r.jsx)("span",{className:"text-sm font-medium",children:d})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(l.Z,{className:"text-white",size:24}),(0,r.jsx)("h1",{className:"text-white text-xl lg:text-2xl font-semibold",children:"設定"})]}),!o&&(0,r.jsx)("div",{className:"w-16"})," "]}),(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("h2",{className:"text-white text-2xl lg:text-3xl font-light mb-2",style:{fontFamily:"Brush Script MT, cursive"},children:s}),i&&(0,r.jsx)("p",{className:"text-white/80 text-sm lg:text-base",children:i})]}),(0,r.jsx)("div",{className:"space-y-6",children:t})]})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=2449)}),_N_E=e.O()}]);