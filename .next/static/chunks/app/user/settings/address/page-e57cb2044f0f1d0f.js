(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[913],{6962:function(e,t,s){Promise.resolve().then(s.bind(s,7051))},7051:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(7437),a=s(2265),o=s(6463),l=s(5137),i=s(9061),n=s(4697);function d(){let e=(0,o.useRouter)(),[t,s]=(0,a.useState)({zipCode:"",state:"",address1:"",address2:""}),[d,c]=(0,a.useState)(!1),[u,h]=(0,a.useState)(""),[x,m]=(0,a.useState)("");(0,a.useEffect)(()=>{(()=>{let t=localStorage.getItem("access_token"),r=localStorage.getItem("user_email");if(!t||!r){e.push("/auth/login");return}s({zipCode:localStorage.getItem("user_zip_code")||"",state:localStorage.getItem("user_state")||"",address1:localStorage.getItem("user_address1")||"",address2:localStorage.getItem("user_address2")||""})})()},[e]);let g=async()=>{c(!0),m("");try{let s=localStorage.getItem("access_token"),r=localStorage.getItem("user_id");if(!s||!r)throw Error("認証情報が不足しています");let a={zip_code:t.zipCode,state:t.state,address1:t.address1,address2:t.address2},o=await fetch("".concat("https://aps-bbc-02-dhdqd5eqgxa7f0hg.canadacentral-01.azurewebsites.net/api/v1","/auth/user/").concat(r,"/profile"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(a)});if(!o.ok){let e=await o.json();throw Error(e.detail||"住所情報の更新に失敗しました")}localStorage.setItem("user_zip_code",t.zipCode),localStorage.setItem("user_state",t.state),localStorage.setItem("user_address1",t.address1),localStorage.setItem("user_address2",t.address2),h("住所情報が更新されました"),setTimeout(()=>{e.push("/user/settings")},1500)}catch(e){console.error("住所情報更新エラー:",e),m(e.message||"住所情報の更新に失敗しました"),setTimeout(()=>m(""),5e3)}finally{c(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-purple-900 text-white",children:[(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-sm border-b border-white/20",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("button",{onClick:()=>e.push("/user/settings"),className:"flex items-center gap-2 px-3 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors",children:[(0,r.jsx)(l.Z,{size:16}),"戻る"]}),(0,r.jsx)("h1",{className:"text-xl font-bold",children:"住所編集"}),(0,r.jsx)("div",{className:"w-20"})," "]})})}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[u&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-green-500/20 border border-green-500/30 rounded-lg text-green-300",children:u}),x&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/30 rounded-lg text-red-300",children:x}),(0,r.jsxs)("div",{className:"bg-white/10 rounded-2xl p-6",children:[(0,r.jsx)("h3",{className:"text-white text-lg font-medium mb-6",children:"住所情報"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"郵便番号"}),(0,r.jsx)("input",{type:"text",value:t.zipCode,onChange:e=>s(t=>({...t,zipCode:e.target.value})),className:"w-full px-3 py-2 bg-white/20 text-white rounded-lg border border-white/20 focus:outline-none focus:border-white/40",placeholder:"例: 100-0001"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"都道府県"}),(0,r.jsx)("input",{type:"text",value:t.state,onChange:e=>s(t=>({...t,state:e.target.value})),className:"w-full px-3 py-2 bg-white/20 text-white rounded-lg border border-white/20 focus:outline-none focus:border-white/40",placeholder:"例: 東京都"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"住所1"}),(0,r.jsx)("input",{type:"text",value:t.address1,onChange:e=>s(t=>({...t,address1:e.target.value})),className:"w-full px-3 py-2 bg-white/20 text-white rounded-lg border border-white/20 focus:outline-none focus:border-white/40",placeholder:"例: 千代田区千代田1-1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"住所2"}),(0,r.jsx)("input",{type:"text",value:t.address2,onChange:e=>s(t=>({...t,address2:e.target.value})),className:"w-full px-3 py-2 bg-white/20 text-white rounded-lg border border-white/20 focus:outline-none focus:border-white/40",placeholder:"例: アパート名、部屋番号など"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-8",children:[(0,r.jsxs)("button",{onClick:g,disabled:d,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:[(0,r.jsx)(i.Z,{size:16}),d?"保存中...":"保存"]}),(0,r.jsxs)("button",{onClick:()=>e.push("/user/settings"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:[(0,r.jsx)(n.Z,{size:16}),"キャンセル"]})]})]})]})]})}},1066:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let s=(0,r.forwardRef)((s,l)=>{let{color:i="currentColor",size:n=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:u="",children:h,...x}=s;return(0,r.createElement)("svg",{ref:l,...a,width:n,height:n,stroke:i,strokeWidth:c?24*Number(d)/Number(n):d,className:["lucide","lucide-".concat(o(e)),u].join(" "),...x},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(h)?h:[h]])});return s.displayName="".concat(e),s}},5137:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9061:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},4697:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6463:function(e,t,s){"use strict";var r=s(1169);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=6962)}),_N_E=e.O()}]);