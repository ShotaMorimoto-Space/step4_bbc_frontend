(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[127],{7813:function(e,t,r){Promise.resolve().then(r.bind(r,3142))},3142:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(7437),s=r(2265),i=r(6463),a=r(5137),o=r(9061),l=r(4697);function c(){let e=(0,i.useRouter)(),[t,r]=(0,s.useState)({experience:""}),[c,u]=(0,s.useState)(!1),[d,h]=(0,s.useState)(""),[x,p]=(0,s.useState)("");(0,s.useEffect)(()=>{(()=>{let t=localStorage.getItem("access_token"),n=localStorage.getItem("user_email");if(!t||!n){e.push("/auth/login");return}r({experience:localStorage.getItem("user_experience")||""})})()},[e]);let m=async()=>{u(!0),p("");try{let r=localStorage.getItem("access_token"),n=localStorage.getItem("user_id");if(!r||!n)throw Error("認証情報が不足しています");let s={golf_exp:t.experience?"beginner"===t.experience?1:"intermediate"===t.experience?3:"advanced"===t.experience?7:"expert"===t.experience?15:null:null},i=await fetch("".concat("https://aps-bbc-02-dhdqd5eqgxa7f0hg.canadacentral-01.azurewebsites.net/api/v1","/auth/user/").concat(n,"/profile"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(s)});if(!i.ok){let e=await i.json();throw Error(e.detail||"ゴルフ情報の更新に失敗しました")}localStorage.setItem("user_experience",t.experience),h("ゴルフ情報が更新されました"),setTimeout(()=>{e.push("/user/settings")},1500)}catch(e){console.error("ゴルフ情報更新エラー:",e),p(e.message||"ゴルフ情報の更新に失敗しました"),setTimeout(()=>p(""),5e3)}finally{u(!1)}};return(0,n.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-purple-900 text-white",children:[(0,n.jsx)("div",{className:"bg-white/10 backdrop-blur-sm border-b border-white/20",children:(0,n.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("button",{onClick:()=>e.push("/user/settings"),className:"flex items-center gap-2 px-3 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors",children:[(0,n.jsx)(a.Z,{size:16}),"戻る"]}),(0,n.jsx)("h1",{className:"text-xl font-bold",children:"ゴルフ情報編集"}),(0,n.jsx)("div",{className:"w-20"})," "]})})}),(0,n.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[d&&(0,n.jsx)("div",{className:"mb-6 p-4 bg-green-500/20 border border-green-500/30 rounded-lg text-green-300",children:d}),x&&(0,n.jsx)("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/30 rounded-lg text-red-300",children:x}),(0,n.jsxs)("div",{className:"bg-white/10 rounded-2xl p-6",children:[(0,n.jsx)("h3",{className:"text-white text-lg font-medium mb-6",children:"ゴルフ情報"}),(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"ゴルフ経験年数"}),(0,n.jsxs)("select",{value:t.experience,onChange:e=>r(t=>({...t,experience:e.target.value})),className:"w-full px-3 py-2 bg-white/20 text-white rounded-lg border border-white/20 focus:outline-none focus:border-white/40",children:[(0,n.jsx)("option",{value:"",children:"選択してください"}),(0,n.jsx)("option",{value:"beginner",children:"初心者（1年未満）"}),(0,n.jsx)("option",{value:"intermediate",children:"中級者（1-5年）"}),(0,n.jsx)("option",{value:"advanced",children:"上級者（5-10年）"}),(0,n.jsx)("option",{value:"expert",children:"エキスパート（10年以上）"})]})]})}),(0,n.jsxs)("div",{className:"flex gap-3 mt-8",children:[(0,n.jsxs)("button",{onClick:m,disabled:c,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:[(0,n.jsx)(o.Z,{size:16}),c?"保存中...":"保存"]}),(0,n.jsxs)("button",{onClick:()=>e.push("/user/settings"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:[(0,n.jsx)(l.Z,{size:16}),"キャンセル"]})]})]})]})]})}},1066:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),a=(e,t)=>{let r=(0,n.forwardRef)((r,a)=>{let{color:o="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:d="",children:h,...x}=r;return(0,n.createElement)("svg",{ref:a,...s,width:l,height:l,stroke:o,strokeWidth:u?24*Number(c)/Number(l):c,className:["lucide","lucide-".concat(i(e)),d].join(" "),...x},[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(h)?h:[h]])});return r.displayName="".concat(e),r}},5137:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(1066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9061:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(1066).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},4697:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(1066).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=7813)}),_N_E=e.O()}]);