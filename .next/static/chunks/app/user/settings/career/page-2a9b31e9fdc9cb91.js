(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[311],{8506:function(e,t,s){Promise.resolve().then(s.bind(s,6406))},6406:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(7437),o=s(2265),i=s(6463),l=s(5137),n=s(9061),a=s(4697);function c(){let e=(0,i.useRouter)(),[t,s]=(0,o.useState)({sportExp:"",industry:"",jobTitle:"",position:""}),[c,u]=(0,o.useState)(!1),[d,h]=(0,o.useState)(""),[p,x]=(0,o.useState)("");(0,o.useEffect)(()=>{(()=>{let t=localStorage.getItem("access_token"),r=localStorage.getItem("user_email");if(!t||!r){e.push("/auth/login");return}s({sportExp:localStorage.getItem("user_sport_exp")||"",industry:localStorage.getItem("user_industry")||"",jobTitle:localStorage.getItem("user_job_title")||"",position:localStorage.getItem("user_position")||""})})()},[e]);let m=async()=>{u(!0),x("");try{let s=localStorage.getItem("access_token"),r=localStorage.getItem("user_id");if(!s||!r)throw Error("認証情報が不足しています");let o={sport_exp:t.sportExp,industry:t.industry,job_title:t.jobTitle,position:t.position},i=await fetch("".concat("https://aps-bbc-02-dhdqd5eqgxa7f0hg.canadacentral-01.azurewebsites.net/api/v1","/auth/user/").concat(r,"/profile"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(o)});if(!i.ok){let e=await i.json();throw Error(e.detail||"経歴・職歴情報の更新に失敗しました")}localStorage.setItem("user_sport_exp",t.sportExp),localStorage.setItem("user_industry",t.industry),localStorage.setItem("user_job_title",t.jobTitle),localStorage.setItem("user_position",t.position),h("経歴・職歴情報が更新されました"),setTimeout(()=>{e.push("/user/settings")},1500)}catch(e){console.error("経歴・職歴情報更新エラー:",e),x(e.message||"経歴・職歴情報の更新に失敗しました"),setTimeout(()=>x(""),5e3)}finally{u(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-purple-900 text-white",children:[(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-sm border-b border-white/20",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("button",{onClick:()=>e.push("/user/settings"),className:"flex items-center gap-2 px-3 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors",children:[(0,r.jsx)(l.Z,{size:16}),"戻る"]}),(0,r.jsx)("h1",{className:"text-xl font-bold",children:"経歴・職歴編集"}),(0,r.jsx)("div",{className:"w-20"})," "]})})}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[d&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-green-500/20 border border-green-500/30 rounded-lg text-green-300",children:d}),p&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/30 rounded-lg text-red-300",children:p}),(0,r.jsxs)("div",{className:"bg-white/10 rounded-2xl p-6",children:[(0,r.jsx)("h3",{className:"text-white text-lg font-medium mb-6",children:"経歴・職歴情報"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"スポーツ経験"}),(0,r.jsxs)("select",{value:t.sportExp,onChange:e=>s(t=>({...t,sportExp:e.target.value})),className:"w-full px-3 py-2 bg-white/20 text-white rounded-lg border border-white/20 focus:outline-none focus:border-white/40",children:[(0,r.jsx)("option",{value:"",children:"選択してください"}),["サッカー","野球","テニス","バスケットボール","バレーボール","卓球","バドミントン","陸上競技","水泳","柔道","剣道","空手","弓道","アーチェリー","スキー","スノーボード","スケート","フィギュアスケート","体操","新体操","ダンス","その他"].map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"業界"}),(0,r.jsxs)("select",{value:t.industry,onChange:e=>s(t=>({...t,industry:e.target.value})),className:"w-full px-3 py-2 bg-white/20 text-white rounded-lg border border-white/20 focus:outline-none focus:border-white/40",children:[(0,r.jsx)("option",{value:"",children:"選択してください"}),["IT・ソフトウェア","金融・保険","製造業","建設業","不動産","小売・流通","運輸・物流","医療・福祉","教育","公務員","メディア・広告","コンサルティング","法律・会計","飲食・宿泊","美容・ファッション","エンターテイメント","その他"].map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"職種"}),(0,r.jsx)("input",{type:"text",value:t.jobTitle,onChange:e=>s(t=>({...t,jobTitle:e.target.value})),className:"w-full px-3 py-2 bg-white/20 text-white rounded-lg border border-white/20 focus:outline-none focus:border-white/40",placeholder:"例: エンジニア、営業、デザイナーなど"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"役職"}),(0,r.jsx)("input",{type:"text",value:t.position,onChange:e=>s(t=>({...t,position:e.target.value})),className:"w-full px-3 py-2 bg-white/20 text-white rounded-lg border border-white/20 focus:outline-none focus:border-white/40",placeholder:"例: 部長、課長、主任など"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-8",children:[(0,r.jsxs)("button",{onClick:m,disabled:c,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:[(0,r.jsx)(n.Z,{size:16}),c?"保存中...":"保存"]}),(0,r.jsxs)("button",{onClick:()=>e.push("/user/settings"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:[(0,r.jsx)(a.Z,{size:16}),"キャンセル"]})]})]})]})]})}},1066:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(2265),o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let s=(0,r.forwardRef)((s,l)=>{let{color:n="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:d="",children:h,...p}=s;return(0,r.createElement)("svg",{ref:l,...o,width:a,height:a,stroke:n,strokeWidth:u?24*Number(c)/Number(a):c,className:["lucide","lucide-".concat(i(e)),d].join(" "),...p},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(h)?h:[h]])});return s.displayName="".concat(e),s}},5137:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9061:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},4697:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(1066).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6463:function(e,t,s){"use strict";var r=s(1169);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=8506)}),_N_E=e.O()}]);