(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[645],{5355:function(e,s,t){Promise.resolve().then(t.bind(t,8911))},8911:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return i}});var a=t(7437),n=t(2265),c=t(8357);class r{static async checkBackendHealth(){try{let e=await fetch("".concat(c.$w,"/health"));if(!e.ok)throw Error("HTTP ".concat(e.status,": ").concat(e.statusText));let s=await e.json();return{backend:!0,message:s.message||"Backend is healthy",timestamp:new Date().toISOString()}}catch(e){return console.error("Backend health check failed:",e),{backend:!1,message:e instanceof Error?e.message:"Unknown error",timestamp:new Date().toISOString()}}}static async checkRootEndpoint(){try{let e=await fetch("".concat(c.$w,"/"));if(!e.ok)throw Error("HTTP ".concat(e.status,": ").concat(e.statusText));let s=await e.json();return{backend:!0,message:s.message||"Backend is running",timestamp:new Date().toISOString()}}catch(e){return console.error("Root endpoint check failed:",e),{backend:!1,message:e instanceof Error?e.message:"Unknown error",timestamp:new Date().toISOString()}}}static async checkOverallHealth(){let e=await this.checkBackendHealth(),s=e.backend;return{backend:e,overall:s,timestamp:new Date().toISOString()}}}var l=t(6845);function i(){let[e,s]=(0,n.useState)(null),[t,c]=(0,n.useState)("未確認"),[i,d]=(0,n.useState)(!1),[o,m]=(0,n.useState)(null),h=async()=>{d(!0),m(null);try{let e=await r.checkBackendHealth();s(e)}catch(e){m(e instanceof Error?e.message:"Unknown error")}finally{d(!1)}},x=async()=>{try{let e=l.e8.isAuthenticated(),s=l.e8.isTokenValid();e&&s?c("認証済み・トークン有効"):e?c("認証済み・トークン無効"):c("未認証")}catch(e){c("エラー: "+(e instanceof Error?e.message:"Unknown error"))}};return(0,n.useEffect)(()=>{h(),x()},[]),(0,a.jsxs)("div",{className:"p-6 max-w-2xl mx-auto",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"\uD83E\uDDEA API接続テスト"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"\uD83D\uDCE1 バックエンド接続状態"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"ステータス:"}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((null==e?void 0:e.backend)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:(null==e?void 0:e.backend)?"接続成功":"接続失敗"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"メッセージ:"}),(0,a.jsx)("span",{className:"text-gray-800 font-mono text-sm",children:(null==e?void 0:e.message)||"N/A"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"最終確認:"}),(0,a.jsx)("span",{className:"text-gray-800 text-sm",children:(null==e?void 0:e.timestamp)?new Date(e.timestamp).toLocaleString("ja-JP"):"N/A"})]})]}),(0,a.jsx)("button",{onClick:h,disabled:i,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"確認中...":"再確認"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"\uD83D\uDD10 認証状態"}),(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"状態:"}),(0,a.jsx)("span",{className:"text-gray-800 font-medium",children:t})]})}),(0,a.jsx)("button",{onClick:x,className:"mt-4 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:"再確認"})]}),o&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2 text-red-800",children:"❌ エラー"}),(0,a.jsx)("p",{className:"text-red-700",children:o})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-700",children:"ℹ️ 接続情報"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"バックエンドURL:"}),(0,a.jsx)("span",{className:"font-mono ml-2",children:"https://aps-bbc-02-dhdqd5eqgxa7f0hg.canadacentral-01.azurewebsites.net"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"API バージョン:"}),(0,a.jsx)("span",{className:"font-mono ml-2",children:"v1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"環境:"}),(0,a.jsx)("span",{className:"font-mono ml-2",children:"本番環境"})]})]})]})]})}}},function(e){e.O(0,[845,971,23,744],function(){return e(e.s=5355)}),_N_E=e.O()}]);